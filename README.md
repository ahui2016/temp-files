# temp-files

Save temporary files in the server. (保存臨時檔案到服務器)

简而言之，如果你有一个 VPS, 在里面部署本软件后，你就获得了一个简单的网站，
可随时通过任何电脑或手机上传或下载文件, **没有人会查看你的照片或审核你的文件**,
也不用担心文件被删除或帐号被封禁。

可在线新建和编辑 txt 或 md 文件，可在线预览 Markdown。

## 极致简单

这是一个用 Go 语言和 JavaScript 做的网站，用途主要是临时保存小文件。
核心思想是极致简单, 尤其注重源代码的简单。因此，源代码非常直白、易读。
前端使用原生 JavaScript, 因此不需要任何预编译，直接写 JS, 刷新前端即可生效。

由于追求简单，部署后的网站并未对手机浏览器进行优化，比较适合在电脑上访问。

## 安装运行

0. 安装 Go 语言环境 <https://go.dev/doc/install> (要求 Go 1.21.0 以上)
1. 请使用 git clone 或直接下载源码 zip <https://github.com/ahui2016/temp-files>
2. 获得源码后，通过终端进入项目文件夹内 (`cd temp-files`)
3. 执行命令 `go build`, 即可获得可执行文件 temp-files.exe
4. 执行命令 `./temp-files.exe` (如果是 Linux 或 MacOS, 则是`./temp-files`)
  - 至此，程序已启动，并显示网址 (默认是 http://127.0.0.1:5000)
  - 通过浏览器访问网址即可使用，默认密码是 abcd
5. 按 `Ctrl+C` 可终止程序

### 设置(config)

- 第一次执行 `./temp-files.exe` 之后，可得到文件 `app_config.toml`
- 用文本编辑器打开 `app_config.toml` 可修改端口、密码等
- 修改 `app_config.toml` 之后要重启程序才生效

前端限制上传文件体积，可进控制台 `FileSizeLimit = 50*MB` 更改（但最终仍受后端限制）。
建议不要上传太大的文件，本程序未针对大文件进行优化，主要应用场景是小文件。

## 旧文本文件

- 每次修改文本文件 (在 edit.html 页面点击 Submit 按钮) 时，都会在 `old` 文件夹里自动产生一个旧文本文件。
- 在文件列表页面 (index.html) 按 F12 进入控制台，使用函数 `gotoOld()` 可查看旧文本文件列表。
- 旧文本文件数量有上限 (默认 100 个，可在 app_config 中修改), 超过上限会自动删除最旧的文件。

## 密码重试次数

- 每 1 分钟内尝试密码不可超过 5 次（可再 app_config.toml 中修改）
- 尝试密码并且错误不可超过 100 次（该数值写死在代码里）
- 一旦密码正确，尝试密码的错误次数会归零（也就是说又重新获得 100 次错误机会）
- 如果密码连续错误超过 100 次，就要到服务器里重启程序才能归零

## 下载备份

- 可打包下载全部文本文件（但下载的压缩包里只包含 txt 和 md 文件，不包含其他文件）
- 在文件列表页面 (index.html) 按 F12 进入控制台，使用函数 `zipTextFiles()` 打包下载。
